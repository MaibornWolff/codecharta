<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../../">
  <title data-ice="title">app/codeCharta/core/data/dataValidatorService.spec.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeChartaController.js~CodeChartaController.html">CodeChartaController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeChartaDirective.js~CodeChartaDirective.html">CodeChartaDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/codeMap</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeMap/codeMapAssetService.js~CodeMapAssetService.html">CodeMapAssetService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeMap/codeMapController.js~CodeMapController.html">CodeMapController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeMap/codeMapDirective.js~CodeMapDirective.html">CodeMapDirective</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeMap/codeMapService.js~CodeMapService.html">CodeMapService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-CodeMapMaterialPack">CodeMapMaterialPack</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://threejs.org/docs/?q=box#Reference/Geometries/BoxGeometry">BoxGeometry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://threejs.org/docs/?q=rayca#Reference/Core/Raycaster">Raycaster</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://threejs.org/docs/?q=mesh#Reference/Objects/Mesh">Mesh</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/codeMap/threeViewer</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeMap/threeViewer/threeCameraService.js~ThreeCameraService.html">ThreeCameraService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeMap/threeViewer/threeOrbitControlsService.js~ThreeOrbitControlsService.html">ThreeOrbitControlsService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeMap/threeViewer/threeRendererService.js~ThreeRendererService.html">ThreeRendererService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeMap/threeViewer/threeSceneService.js~ThreeSceneService.html">ThreeSceneService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeMap/threeViewer/threeUpdateCycleService.js~ThreeUpdateCycleService.html">ThreeUpdateCycleService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/codeMap/threeViewer/threeViewerService.js~ThreeViewerService.html">ThreeViewerService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ThreeOrbitControls">ThreeOrbitControls</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://threejs.org/docs/#Reference/Cameras/PerspectiveCamera">PerspectiveCamera</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://threejs.org/docs/api/renderers/WebGLRenderer.html">WebGLRenderer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://threejs.org/docs/?q=scene#Reference/Scenes/Scene">Scene</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/core/data</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/data/dataService.js~DataService.html">DataService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/data/dataValidatorService.js~DataValidatorService.html">DataValidatorService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope">Scope</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://docs.angularjs.org/api/ng/service/$http">$http</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/d3/d3-hierarchy/blob/master/README.md#hierarchy">d3#hierarchy</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/core/data/model</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/data/model/dataModel.js~DataModel.html">DataModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-CodeMap">CodeMap</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/core/scenario</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/scenario/scenarioService.js~ScenarioService.html">ScenarioService</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/core/scenario/model</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/scenario/model/scenario.js~Scenario.html">Scenario</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/core/settings</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/settings/settingsService.js~SettingsService.html">SettingsService</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/core/settings/model</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/settings/model/range.js~Range.html">Range</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/settings/model/settings.js~Settings.html">Settings</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/core/tooltip</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/tooltip/tooltipService.js~TooltipService.html">TooltipService</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/core/treemap</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/treemap/treeMapService.js~TreeMapService.html">TreeMapService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/d3/d3-hierarchy/blob/master/README.md#treemap">d3#treemap</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/core/url</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/core/url/urlService.js~UrlService.html">UrlService</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://docs.angularjs.org/api/ng/service/$location">$location</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/common/checkbox</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/common/checkbox/checkboxDirective.js~CheckboxDirective.html">CheckboxDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/common/collapsible</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/common/collapsible/collapsibleDirective.js~CollapsibleDirective.html">CollapsibleDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/common/collapsibleElement</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/common/collapsibleElement/collapsibleElementDirective.js~CollapsibleElementDirective.html">CollapsibleElementDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/common/dropdown</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/common/dropdown/dropdownController.js~DropdownController.html">DropdownController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/common/dropdown/dropdownDirective.js~DropdownDirective.html">DropdownDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/common/fab</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/common/fab/fabDirective.js~FabDirective.html">FabDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/common/numberField</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/common/numberField/numberFieldDirective.js~NumberFieldDirective.html">NumberFieldDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/common/slider</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/common/slider/sliderDirective.js~SliderDirective.html">SliderDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/detailPanel</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/detailPanel/detailPanelController.js~DetailPanelController.html">DetailPanelController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/detailPanel/detailPanelDirective.js~DetailPanelDirective.html">DetailPanelDirective</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-CommonDetails">CommonDetails</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Details">Details</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-SpecificDetails">SpecificDetails</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://docs.angularjs.org/api/ngMock/service/$timeout">Timeout</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/fabBar</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/fabBar/fabBarDirective.js~FabBarDirective.html">FabBarDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/fileChooser</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/fileChooser/fileChooserController.js~FileChooserController.html">FileChooserController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/fileChooser/fileChooserDirective.js~FileChooserDirective.html">FileChooserDirective</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/fileChooser/fileChooserPanelDirective.js~FileChooserPanelDirective.html">FileChooserPanelDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/legendPanel</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/legendPanel/legendPanelController.js~LegendPanelController.html">LegendPanelController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/legendPanel/legendPanelDirective.js~LegendPanelDirective.html">LegendPanelDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/revisionChooser</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/revisionChooser/revisionChooserController.js~RevisionChooserController.html">RevisionChooserController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/revisionChooser/revisionChooserDirective.js~RevisionChooserDirective.html">RevisionChooserDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/scenarioButtons</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/scenarioButtons/scenarioButtonsController.js~ScenarioButtonsController.html">ScenarioButtonsController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/scenarioButtons/scenarioButtonsDirective.js~ScenarioButtonsDirective.html">ScenarioButtonsDirective</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">codeCharta/ui/settingsPanel</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/settingsPanel/settingsPanelController.js~SettingsPanelController.html">SettingsPanelController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/app/codeCharta/ui/settingsPanel/settingsPanelDirective.js~SettingsPanelDirective.html">SettingsPanelDirective</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">app/codeCharta/core/data/dataValidatorService.spec.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">require(&quot;./data.js&quot;);

/**
 * @test {DataValidatorService}
 */
describe(&quot;app.codeCharta.core.data.dataValidatorService&quot;, function() {

    var dataValidatorService;

    beforeEach(angular.mock.module(&quot;app.codeCharta.core.data&quot;));
    beforeEach(angular.mock.inject(function (_dataValidatorService_, $httpBackend) {
        dataValidatorService = _dataValidatorService_;

        //bind ressource to httpBackend
        $httpBackend
            .when(&quot;GET&quot;, &quot;schema.json&quot;)
            .respond(200, require(&quot;./schema.json&quot;));
    }));

    /**
     * @test {DataValidatorService#validate}
     * @test {DataValidatorService#uniqueName}
     * @test {DataValidatorService#uniqueArray}
     */
    describe(&quot;map with revisions&quot;, ()=&gt;{

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        xit(&quot;must have &apos;revisions&apos; array as a property with at least one element of type &apos;node&apos;&quot;, function (done) {

            this.timeout(10000);

            let correct = {
                &quot;revisions&quot;: [
                    {
                        &quot;name&quot;:&quot;some name&quot;
                    }
                ]
            };

            dataValidatorService.validate(correct).then(

                (result) =&gt; {
                    expect(dataValidatorService.validate(result).valid);
                    done();
                }, () =&gt; {
                    done(&quot;failed&quot;);
                }

            ).catch((e)=&gt;{
                done(err);
            });

        });

    });

    /**
     * @test {DataValidatorService#validate}
     * @test {DataValidatorService#uniqueName}
     * @test {DataValidatorService#uniqueArray}
     */
    describe(&quot;map without revisions&quot;, ()=&gt;{

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        it(&quot;has an array of &apos;nodes&apos;&quot;, () =&gt; {

            //has nodes array
            let correct = {
                &quot;nodes&quot;: [
                    {
                        &quot;name&quot;:&quot;some name&quot;
                    }
                ]
            };

            expect(dataValidatorService.validate(correct).valid);

            //has no nodes array
            let wrong = {
                &quot;notNodes&quot;: {}
            };

            expect(!dataValidatorService.validate(wrong).valid);

        });

    });

    /**
     * @test {DataValidatorService#validate}
     * @test {DataValidatorService#uniqueName}
     * @test {DataValidatorService#uniqueArray}
     */
    describe(&quot;node definition&quot;, ()=&gt;{

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        it(&quot;has name property&quot;, () =&gt; {

            //has name
            let correct = {
                &quot;nodes&quot;: [
                    {
                        &quot;name&quot;:&quot;aName&quot;
                    }
                ]
            };

            expect(dataValidatorService.validate(correct).valid);

            //has no name
            let wrong = {
                &quot;nodes&quot;: [
                    {
                        &quot;definetly not a name&quot;:&quot;I am a name&quot;
                    }
                ]
            };

            expect(!dataValidatorService.validate(wrong).valid);

        });

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        it(&quot;optional &apos;children&apos; array property made of nodes&quot;, () =&gt; {

            //has valid children
            let correct = {
                &quot;nodes&quot;: [
                    {
                        &quot;name&quot;:&quot;I am a parent&quot;,
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;I am a child&quot;
                            }
                        ]
                    }
                ]
            };

            expect(dataValidatorService.validate(correct).valid);

            //has no valid children
            let wrong = {
                &quot;nodes&quot;: [
                    {
                        &quot;name&quot;:&quot;I am a parent&quot;,
                        &quot;children&quot;: [
                            {
                                &quot;notMyName&quot;:&quot;Wont tell&quot;
                            }
                        ]
                    }
                ]
            };

            expect(!dataValidatorService.validate(wrong).valid);

        });

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        it(&quot;optional &apos;attributes&apos; property is an &apos;attributeList&apos; object made of patternProperties &apos;^.*$&apos;:string&quot;, () =&gt; {

            //has valid properties
            let correct = {
                &quot;nodes&quot;: [
                    {
                        &quot;name&quot;:&quot;I am a parent&quot;,
                        &quot;attributes&quot;: {
                            &quot;IAmValid&quot;: 22,
                            &quot;IAmAnInteger&quot;: 42
                        }
                    }
                ]
            };

            expect(dataValidatorService.validate(correct).valid);

            //has not valid properties
            let wrong1 = {
                &quot;nodes&quot;: [
                    {
                        &quot;name&quot;:&quot;I am a parent&quot;,
                        &quot;attributes&quot;: {
                            &quot;IAmValid\nILied&quot;: 22
                        }
                    }
                ]
            };

            expect(!dataValidatorService.validate(wrong1).valid);

            //attributes have wrong dataType
            let wrong2 = {
                &quot;nodes&quot;: [
                    {
                        &quot;name&quot;:&quot;I am a parent&quot;,
                        &quot;attributes&quot;: {
                            &quot;IAmAString&quot;: &quot;&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmNull&quot;: null
                        }
                    }
                ]
            };

            expect(!dataValidatorService.validate(wrong2).valid);


        });

    });

    /**
     * @test {DataValidatorService#validate}
     * @test {DataValidatorService#uniqueName}
     * @test {DataValidatorService#uniqueArray}
     */
    describe(&quot;avoid nodes with same parent and same name: &quot;, ()=&gt; {

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        it(&quot;nodes with same parent should not have the same name&quot;, ()=&gt; {

            let correct = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                }
                            },
                            {
                                &quot;name&quot;:&quot;node_1&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                }
                            }
                        ]
                    }
                ]
            };
            expect(dataValidatorService.validate(correct).valid);

            let wrong = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                }
                            },
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                }
                            }
                        ]
                    }
                ]
            };
            expect(!dataValidatorService.validate(wrong).valid);

        });

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        it(&quot;nodes in different level should be allow to have the same name&quot;, ()=&gt; {
            let different = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                }
                            },
                            {
                                &quot;name&quot;:&quot;node_1&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                },
                                &quot;children&quot;: [
                                    {
                                        &quot;name&quot;:&quot;node_1_0&quot;,
                                        &quot;attributes&quot;:{
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    },
                                    {
                                        &quot;name&quot;:&quot;node_1_1&quot;,
                                        &quot;attributes&quot;:{
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ]
            };
            expect(dataValidatorService.validate(different).valid);

            let same = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                }
                            },
                            {
                                &quot;name&quot;:&quot;node_1&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                },
                                &quot;children&quot;: [
                                    {
                                        &quot;name&quot;:&quot;node_1_0&quot;,
                                        &quot;attributes&quot;:{
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    },
                                    {
                                        &quot;name&quot;:&quot;node_0&quot;,
                                        &quot;attributes&quot;:{
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ]
            };
            expect(dataValidatorService.validate(same).valid);

        });

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        it(&quot;nodes in the same level with different parents should be allow to have the same name&quot;, ()=&gt;{
            let different = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                },
                                &quot;children&quot;: [
                                    {
                                        &quot;name&quot;:&quot;node_0_0&quot;,
                                        &quot;attributes&quot;: {
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    }
                                ]
                            },
                            {
                                &quot;name&quot;:&quot;node_1&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                },
                                &quot;children&quot;: [
                                    {
                                        &quot;name&quot;:&quot;node_1_0&quot;,
                                        &quot;attributes&quot;:{
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ]
            };
            expect(dataValidatorService.validate(different).valid);

            let same = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                },
                                &quot;children&quot;: [
                                    {
                                        &quot;name&quot;:&quot;node_0_0&quot;,
                                        &quot;attributes&quot;: {
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    }
                                ]
                            },
                            {
                                &quot;name&quot;:&quot;node_1&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                },
                                &quot;children&quot;: [
                                    {
                                        &quot;name&quot;:&quot;node_0_0&quot;,
                                        &quot;attributes&quot;:{
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ]
            };
            expect(dataValidatorService.validate(same).valid);
        });

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        it(&quot;Parent and child should be allow to have the same name&quot;, ()=&gt;{
            let different = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                }
                            }
                        ]
                    }
                ]
            };
            expect(dataValidatorService.validate(different).valid);

            let same = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;root&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                }
                            }
                        ]
                    }
                ]
            };
            expect(dataValidatorService.validate(same).valid);
        });

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        it(&quot;nodes, which have childrens, with the same parent should not have the same name&quot;, ()=&gt;{
            let correct = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                },
                                &quot;children&quot;: [
                                    {
                                        &quot;name&quot;:&quot;node_0_1&quot;,
                                        &quot;attributes&quot;: {
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    }
                                ]
                            },
                            {
                                &quot;name&quot;:&quot;node_1&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                },
                                &quot;children&quot;: [
                                    {
                                        &quot;name&quot;:&quot;node_1_0&quot;,
                                        &quot;attributes&quot;:{
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ]
            };
            expect(dataValidatorService.validate(correct).valid);

            let wrong = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                },
                                &quot;children&quot;: [
                                    {
                                        &quot;name&quot;:&quot;node_0_1&quot;,
                                        &quot;attributes&quot;: {
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    }
                                ]
                            },
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                },
                                &quot;children&quot;: [
                                    {
                                        &quot;name&quot;:&quot;node_1_0&quot;,
                                        &quot;attributes&quot;:{
                                            &quot;IamAString&quot;: &quot;str&quot;,
                                            &quot;IAmAnObject&quot;: {},
                                            &quot;IAmAnInteger&quot;: 22
                                        }
                                    }
                                ]
                            }
                        ]
                    }
                ]
            };
            expect(!dataValidatorService.validate(wrong).valid);
        });

        /**
         * @test {DataValidatorService#validate}
         * @test {DataValidatorService#uniqueName}
         * @test {DataValidatorService#uniqueArray}
         */
        it(&quot;the first level in trees with revisions should be allow to have the same name&quot;, ()=&gt;{
            let tree = {
                &quot;nodes&quot; : [
                    {
                        &quot;name&quot;:&quot;root&quot;,
                        &quot;attributes&quot;: {
                            &quot;IamAString&quot;: &quot;str&quot;,
                            &quot;IAmAnObject&quot;: {},
                            &quot;IAmAnInteger&quot;: 22
                        },
                        &quot;children&quot;: [
                            {
                                &quot;name&quot;:&quot;node_0&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                }
                            },
                            {
                                &quot;name&quot;:&quot;node_1&quot;,
                                &quot;attributes&quot;:{
                                    &quot;IamAString&quot;: &quot;str&quot;,
                                    &quot;IAmAnObject&quot;: {},
                                    &quot;IAmAnInteger&quot;: 22
                                }
                            }
                        ]
                    }
                ]
            };

            let correct = {
                &quot;revisions&quot; : [tree, tree]
            };
            expect(dataValidatorService.validate(correct).valid);

            let wrong = {
                &quot;not revisions&quot;: [tree, tree]
            };
            expect(!dataValidatorService.validate(wrong).valid);

        })
    });


});

</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
