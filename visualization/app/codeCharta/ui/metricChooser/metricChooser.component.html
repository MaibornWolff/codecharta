<mat-select
	[panelClass]="'cc-metric-chooser'"
	[value]="selectedMetricName"
	(selectionChange)="handleMetricChanged($event.value)"
	(openedChange)="handleOpenedChanged($event)"
	[disabled]="isDisabled"
	*ngIf="attributeDescriptors$ | async as attributeDescriptors"
>
	<mat-select-trigger>{{ selectedMetricName }}</mat-select-trigger>
	<mat-form-field class="cc-metric-chooser-search-field">
		<i matPrefix class="fa fa-search search-icon"></i>
		<input #searchTermInput matInput type="text" [placeholder]="searchPlaceholder" [(ngModel)]="searchTerm" />
	</mat-form-field>
	<div class="cc-metric-chooser-option-container">
		<mat-option
			*ngFor="let option of metricData$ | async | filterMetricDataBySearchTerm : searchTerm"
			[value]="option.name"
			[title]="attributeDescriptors[option.name] | attributeDescriptorTooltip : option.name"
		>
			{{ option.name }}
			<span class="metric-max-value">({{ option.maxValue }})</span><br />
			<span class="metric-subtitle" *ngIf="attributeDescriptors[option.name]?.description as descriptorSubtitle">
				{{ descriptorSubtitle }}
			</span>
		</mat-option>
	</div>
</mat-select>
<ng-content select="[hoveredInformation]" *ngIf="!hideMetricSum"></ng-content>
