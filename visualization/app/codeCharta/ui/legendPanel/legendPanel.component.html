<div class="block-wrapper" [class.visible]="isLegendVisible" [class.isAttributeSideBarVisible]="isAttributeSideBarVisibleService.isOpen">
	<div *ngIf="!(isDeltaState$ | async)">
		<cc-legend-block [metricDecorations]="areaMetric$ | async" [metricFor]="'Area'"></cc-legend-block>
		<cc-legend-block [metricDecorations]="heightMetric$ | async" [metricFor]="'Height'"></cc-legend-block>
		<cc-legend-block
			*ngIf="edgeMetric$ | async; let edgeMetric"
			[metricDecorations]="edgeMetric"
			[metricFor]="'Edge'"
		></cc-legend-block>
		<hr />
		<cc-legend-block [metricDecorations]="colorMetric$ | async" [metricFor]="'Color'"></cc-legend-block>
		<cc-color-picker-for-map-color [mapColorFor]="'positive'"></cc-color-picker-for-map-color>
		<cc-color-picker-for-map-color [mapColorFor]="'neutral'"></cc-color-picker-for-map-color>
		<cc-color-picker-for-map-color [mapColorFor]="'negative'"></cc-color-picker-for-map-color>
	</div>

	<div *ngIf="isDeltaState$ | async">
		<cc-color-picker-for-map-color [mapColorFor]="'positiveDelta'"></cc-color-picker-for-map-color>
		<cc-color-picker-for-map-color [mapColorFor]="'negativeDelta'"></cc-color-picker-for-map-color>
	</div>

	<hr />
	<cc-color-picker-for-map-color [mapColorFor]="'selected'"></cc-color-picker-for-map-color>

	<ng-container *ngIf="edgeMetric$ | async; let edgeMetric">
		<hr />
		<div ng-if="$ctrl._viewModel.edgeMetricHasEdge">
			<cc-color-picker-for-map-color [mapColorFor]="'outgoingEdge'"></cc-color-picker-for-map-color>
			<cc-color-picker-for-map-color [mapColorFor]="'incomingEdge'"></cc-color-picker-for-map-color>
		</div>
	</ng-container>

	<cc-legend-marked-packages></cc-legend-marked-packages>
</div>

<button
	color="primary"
	class="panel-button"
	(click)="toggleIsLegendVisible()"
	[class.isAttributeSideBarVisible]="isAttributeSideBarVisibleService.isOpen"
	title="{{ isLegendVisible ? 'Hide panel' : 'Show panel' }}"
>
	LEGEND
</button>
