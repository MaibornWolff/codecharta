<div
	ng-if="!$ctrl.node.isExcluded"
	class="tree-element-{{::$ctrl.depth?$ctrl.depth:0}} {{::$ctrl.isLeaf()?'tree-leaf':'tree-parent'}}"
	ng-init="$ctrl.openRootFolderByDefault($ctrl.depth)"
	id="{{::$ctrl.depth?'':'tree-root'}}"
>
	<div
		class="tree-element-label-{{::$ctrl.depth?$ctrl.depth:0}} tree-element-label"
		ng-class="{ hovered: $ctrl._viewModel.isHovered, marked: $ctrl._viewModel.isMarked }"
		ng-mouseenter="$ctrl.onMouseEnter()"
		ng-mouseleave="$ctrl.onMouseLeave()"
		ng-right-click="$ctrl.openNodeContextMenu($event)"
		ng-click="$ctrl.onClickNode()"
		id="{{ ::$ctrl.node.path }}"
	>
		<cc-map-tree-view-item-icon [node]="$ctrl.node" [is-folder-open]="$ctrl._viewModel.isFolderOpened"></cc-map-tree-view-item-icon>
		<cc-map-tree-view-item-name
			[node]="$ctrl.node"
			[is-hovered]="$ctrl._viewModel.isHovered"
			[unary-value]="$ctrl.getNodeUnaryValue()"
			[unary-percentage]="$ctrl.getUnaryPercentage()"
		>
		</cc-map-tree-view-item-name>

		<cc-map-tree-view-item-option-buttons
			[is-flattened]="$ctrl.node.isFlattened"
			[is-hovered]="$ctrl._viewModel.isHovered"
			[open-node-context-menu]="$ctrl.openNodeContextMenu"
		></cc-map-tree-view-item-option-buttons>
	</div>

	<div class="tree-element-children tree-element-children-{{::$ctrl.depth?$ctrl.depth:0}}">
		<div ng-if="$ctrl._viewModel.isFolderOpened" ng-repeat="node in $ctrl.node.children">
			<map-tree-view-level-component node="::node" depth="::$ctrl.depth+1"></map-tree-view-level-component>
		</div>
	</div>
</div>
