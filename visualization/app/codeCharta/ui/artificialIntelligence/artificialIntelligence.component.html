<div class="artificial-intelligence-component">
	<md-menu>
		<md-button
			class="suspicious-metrics-button"
			ng-click="$mdMenu.open($event);hideBadge = true;"
			title="Open Suspicious Metrics Panel"
		>
			<i class="fa fa-exclamation-triangle"></i>
			<span
				id="ai-badge"
				ng-show="
					!hideBadge &&
					($ctrl._viewModel.riskProfile !== undefined ||
						$ctrl._viewModel.suspiciousMetricSuggestionLinks.length ||
						$ctrl._viewModel.unsuspiciousMetrics.length)
				"
			>
				{{
					($ctrl._viewModel.riskProfile !== undefined ? 1 : 0) +
						($ctrl._viewModel.suspiciousMetricSuggestionLinks.length ? 1 : 0) +
						($ctrl._viewModel.unsuspiciousMetrics.length ? 1 : 0)
				}}
			</span>
		</md-button>

		<md-menu-content class="ai-drop-down" width="7">
			<md-menu-item class="ai-item" ng-show="$ctrl._viewModel.unsuspiciousMetrics.length">
				<md-button ng-disabled="true">
					<span ng-show="$ctrl._viewModel.analyzedProgrammingLanguage.length"
						>Unsuspicious Metrics in {{ $ctrl._viewModel.analyzedProgrammingLanguage }} code</span
					>
					<span ng-show="!$ctrl._viewModel.analyzedProgrammingLanguage.length">Unsuspicious Metrics</span>
				</md-button>
			</md-menu-item>

			<md-menu-item class="ai-list-item" ng-show="$ctrl._viewModel.unsuspiciousMetrics.length">
				<ul>
					<li ng-repeat="unsuspiciousMetric in $ctrl._viewModel.unsuspiciousMetrics">{{ unsuspiciousMetric }}</li>
				</ul>
			</md-menu-item>
			<md-menu-item class="ai-item" ng-show="$ctrl._viewModel.suspiciousMetricSuggestionLinks.length"
				><md-button ng-disabled="true">
					<span ng-show="$ctrl._viewModel.analyzedProgrammingLanguage.length"
						>Suspicious Metrics in {{ $ctrl._viewModel.analyzedProgrammingLanguage }} code (click below to view)</span
					>
					<span ng-show="!$ctrl._viewModel.analyzedProgrammingLanguage.length">Suspicious Metrics (click below to view)</span>
				</md-button></md-menu-item
			>

			<md-menu-item class="custom-configs-item" ng-repeat="item in $ctrl._viewModel.suspiciousMetricSuggestionLinks">
				<md-button
					class="button-hovering"
					ng-click="$ctrl.applyCustomConfig(item.generalCustomConfigId)"
					title="Click to apply Map Configuration to show files with suspicious metric {{ item.metric }} and high risk"
				>
					Suspicious {{ item.metric.toUpperCase() }} Files
				</md-button>
				<md-button
					class="button-hovering"
					ng-if="item.outlierCustomConfigId.length > 0"
					ng-click="$ctrl.applyCustomConfig(item.outlierCustomConfigId)"
					title="Click to apply Map Configuration to show files with very high risk and metric values of {{ item.metric }}"
				>
					Very High Risk {{ item.metric.toUpperCase() }} Files
				</md-button>
			</md-menu-item>
		</md-menu-content>
	</md-menu>

	<md-menu>
		<md-button class="high-risk-profile-button" ng-click="$mdMenu.open($event)" title="Open High Risk Profile">
			<i class="fa fa-bar-chart"></i>
		</md-button>
		<md-menu-content>
			<md-menu-item class="title">
				<span ng-show="$ctrl._viewModel.analyzedProgrammingLanguage.length"
					>Risk Profile for {{ $ctrl._viewModel.analyzedProgrammingLanguage }} code (most frequent programming language in
					project)<br />
					Calculations are always based on mcc (cyclomatic complexity)</span
				>
			</md-menu-item>

			<md-menu-item class="ai-list-item" ng-show="$ctrl._viewModel.riskProfile === undefined">
				<span>Could not calculate Risk Profile. Metrics rloc and mcc not available.</span>
			</md-menu-item>

			<md-menu-item class="ai-list-item" ng-show="$ctrl._viewModel.riskProfile !== undefined">
				<ul>
					<li>{{ $ctrl._viewModel.riskProfile.lowRisk }}% of overall code is placed in files with low complexity</li>
					<li>{{ $ctrl._viewModel.riskProfile.moderateRisk }}% of overall code is placed in files with moderate complexity</li>
					<li>{{ $ctrl._viewModel.riskProfile.highRisk }}% of overall code is placed in files with high complexity</li>
					<li>{{ $ctrl._viewModel.riskProfile.veryHighRisk }}% of overall code is placed in files with extreme complexity</li>
				</ul>
			</md-menu-item>

			<md-menu-item class="ai-item risk-profile" ng-show="$ctrl._viewModel.riskProfile !== undefined">
				<md-button
					ng-if="$ctrl._viewModel.riskProfile.lowRisk > 0"
					title="Low Risk ({{ $ctrl._viewModel.riskProfile.lowRisk }}% of code)"
					class="low-risk"
					style="width:{{ $ctrl._viewModel.riskProfile.lowRisk }}%"
					ng-disabled="true"
				></md-button>
				<md-button
					ng-if="$ctrl._viewModel.riskProfile.moderateRisk > 0"
					title="Moderate Risk ({{ $ctrl._viewModel.riskProfile.moderateRisk }}% of code)"
					class="moderate-risk"
					style="width:{{ $ctrl._viewModel.riskProfile.moderateRisk }}%"
					ng-disabled="true"
				></md-button>
				<md-button
					ng-if="$ctrl._viewModel.riskProfile.highRisk > 0"
					title="High Risk ({{ $ctrl._viewModel.riskProfile.highRisk }}% of code)"
					class="high-risk"
					style="width:{{ $ctrl._viewModel.riskProfile.highRisk }}%"
					ng-disabled="true"
				></md-button>
				<md-button
					ng-if="$ctrl._viewModel.riskProfile.veryHighRisk > 0"
					title="Very High Risk ({{ $ctrl._viewModel.riskProfile.veryHighRisk }}% of code)"
					class="very-high-risk"
					style="width:{{ $ctrl._viewModel.riskProfile.veryHighRisk }}%"
					ng-disabled="true"
				></md-button>
			</md-menu-item>
		</md-menu-content>
	</md-menu>
</div>
