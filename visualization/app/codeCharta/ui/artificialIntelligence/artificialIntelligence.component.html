<div class="artificial-intelligence-component">
	<md-menu>
		<md-button
			class="suspicious-metrics-button"
			ng-click="$mdMenu.open($event);hideBadge = true;"
			title="Open Suspicious Metrics Panel"
		>
			<i class="fa fa-exclamation-triangle"></i>
			<span
				id="ai-badge"
				ng-show="
					!hideBadge &&
					($ctrl._viewModel.riskProfile !== undefined ||
						$ctrl._viewModel.suspiciousMetricSuggestionLinks.length ||
						$ctrl._viewModel.unsuspiciousMetrics.length)
				"
			>
				{{
					($ctrl._viewModel.riskProfile !== undefined ? 1 : 0) +
						($ctrl._viewModel.suspiciousMetricSuggestionLinks.length ? 1 : 0) +
						($ctrl._viewModel.unsuspiciousMetrics.length ? 1 : 0)
				}}
			</span>
		</md-button>

		<md-menu-content class="ai-drop-down">
			<md-menu-item class="ai-item" ng-show="$ctrl._viewModel.unsuspiciousMetrics.length">
				<md-button ng-disabled="true">
					<span ng-show="$ctrl._viewModel.analyzedProgrammingLanguage.length"
						>Unsuspicious Metrics in {{ $ctrl._viewModel.analyzedProgrammingLanguage }} code</span
					>
					<span ng-show="!$ctrl._viewModel.analyzedProgrammingLanguage.length">Unsuspicious Metrics</span>
				</md-button>
			</md-menu-item>

			<md-menu-item class="ai-list-item" ng-show="$ctrl._viewModel.unsuspiciousMetrics.length">
				<ul>
					<li ng-repeat="unsuspiciousMetric in $ctrl._viewModel.unsuspiciousMetrics">{{ unsuspiciousMetric }}</li>
				</ul>
			</md-menu-item>

			<md-menu-item class="ai-item" ng-show="$ctrl._viewModel.suspiciousMetricSuggestionLinks.length"
				><md-button ng-disabled="true">
					<span ng-show="$ctrl._viewModel.analyzedProgrammingLanguage.length"
						>Suspicious Metrics in {{ $ctrl._viewModel.analyzedProgrammingLanguage }} code (click below to view)</span
					>
					<span ng-show="!$ctrl._viewModel.analyzedProgrammingLanguage.length">Suspicious Metrics (click below to view)</span>
				</md-button>
			</md-menu-item>
			<ul class="ai-suspicious-metrics-list">
				<li class="ai-suspicious-metrics-item" ng-repeat="item in $ctrl._viewModel.suspiciousMetricSuggestionLinks">
					<md-button
						class="metric-button"
						ng-click="$ctrl.applyCustomConfig(item.generalCustomConfigId)"
						title="Click to apply Map Configuration to show files with suspicious metric {{
							item.metric
						}} and high risk or very high risk depending on selection"
					>
						Suspicious {{ item.metric.toUpperCase() }} Files
					</md-button>

					<md-button
						class="risk-button"
						ng-click="$ctrl.applyCustomConfig(item.outlierCustomConfigId)"
						ng-show="item.outlierCustomConfigId.length > 0"
						title="Show very high risk files"
					>
						<i class="fa fa-exclamation-triangle"></i>
					</md-button>
				</li>
			</ul>
		</md-menu-content>
	</md-menu>

	<md-menu>
		<md-button class="high-risk-profile-button" ng-click="$mdMenu.open($event)" title="Open High Risk Profile">
			<i class="fa fa-bar-chart"></i>
		</md-button>
		<md-menu-content class="ai-drop-down">
			<md-menu-item class="title-item">
				<md-button ng-disabled="true">
					<p class="title" ng-show="$ctrl._viewModel.analyzedProgrammingLanguage.length">
						Risk Profile for {{ $ctrl._viewModel.analyzedProgrammingLanguage }} code (most frequent programming language in
						project)<br />
						Calculations are always based on mcc (cyclomatic complexity)
					</p>
				</md-button>
			</md-menu-item>

			<md-menu-item class="ai-list-item" ng-show="$ctrl._viewModel.riskProfile === undefined">
				<span>Could not calculate Risk Profile. Metrics rloc and mcc not available.</span>
			</md-menu-item>

			<md-menu-item class="ai-list-item" ng-show="$ctrl._viewModel.riskProfile !== undefined">
				<ul>
					<li>{{ $ctrl._viewModel.riskProfile.lowRisk }}% of overall code is in files with low complexity</li>
					<li>{{ $ctrl._viewModel.riskProfile.moderateRisk }}% of overall code is in files with moderate complexity</li>
					<li>{{ $ctrl._viewModel.riskProfile.highRisk }}% of overall code is in files with high complexity</li>
					<li>{{ $ctrl._viewModel.riskProfile.veryHighRisk }}% of overall code is in files with extreme complexity</li>
				</ul>
			</md-menu-item>

			<md-menu-item class="ai-item risk-profile" ng-show="$ctrl._viewModel.riskProfile !== undefined">
				<div
					ng-if="$ctrl._viewModel.riskProfile.lowRisk > 0"
					title="Low Risk ({{ $ctrl._viewModel.riskProfile.lowRisk }}% of code)"
					class="low-risk"
					style="width:{{ $ctrl._viewModel.riskProfile.lowRisk }}%"
					ng-disabled="true"
				>
					{{ $ctrl._viewModel.riskProfile.lowRisk }}%
				</div>
				<div
					ng-if="$ctrl._viewModel.riskProfile.moderateRisk > 0"
					title="Moderate Risk ({{ $ctrl._viewModel.riskProfile.moderateRisk }}% of code)"
					class="moderate-risk"
					style="width:{{ $ctrl._viewModel.riskProfile.moderateRisk }}%"
					ng-disabled="true"
				>
					{{ $ctrl._viewModel.riskProfile.moderateRisk }}%
				</div>
				<div
					ng-if="$ctrl._viewModel.riskProfile.highRisk > 0"
					title="High Risk ({{ $ctrl._viewModel.riskProfile.highRisk }}% of code)"
					class="high-risk"
					style="width:{{ $ctrl._viewModel.riskProfile.highRisk }}%"
					ng-disabled="true"
				>
					{{ $ctrl._viewModel.riskProfile.highRisk }}%
				</div>
				<div
					ng-if="$ctrl._viewModel.riskProfile.veryHighRisk > 0"
					title="Very High Risk ({{ $ctrl._viewModel.riskProfile.veryHighRisk }}% of code)"
					class="very-high-risk"
					style="width:{{ $ctrl._viewModel.riskProfile.veryHighRisk }}%"
					ng-disabled="true"
				>
					{{ $ctrl._viewModel.riskProfile.veryHighRisk }}%
				</div>
			</md-menu-item>
		</md-menu-content>
	</md-menu>
</div>
